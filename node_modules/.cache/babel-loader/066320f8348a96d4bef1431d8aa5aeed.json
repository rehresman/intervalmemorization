{"ast":null,"code":"import _classCallCheck from\"/Users/ryanehresman/Documents/JS/create-react-app-next/musicstudy/intervalmemorization/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/ryanehresman/Documents/JS/create-react-app-next/musicstudy/intervalmemorization/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/ryanehresman/Documents/JS/create-react-app-next/musicstudy/intervalmemorization/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _createSuper from\"/Users/ryanehresman/Documents/JS/create-react-app-next/musicstudy/intervalmemorization/node_modules/@babel/runtime/helpers/esm/createSuper\";import _inherits from\"/Users/ryanehresman/Documents/JS/create-react-app-next/musicstudy/intervalmemorization/node_modules/@babel/runtime/helpers/esm/inherits\";import React from\"react\";import{connect}from\"react-redux\";import{startTime,updateTime}from\"./actions/index\";var Stopwatch=/*#__PURE__*/function(_React$Component){_inherits(Stopwatch,_React$Component);var _super=_createSuper(Stopwatch);function Stopwatch(){var _this;_classCallCheck(this,Stopwatch);_this=_super.call(this);_this.state={interval:null,color:\"#fff\"};_this.changeColor=_this.changeColor.bind(_assertThisInitialized(_this));return _this;}_createClass(Stopwatch,[{key:\"changeColor\",value:function changeColor(){var r=Math.floor(Math.random()*6);var color;if(r===this.state.color){r=(r+1)%6;}console.log(\"r=\",r);switch(r){case 0:color=\"#007bff\";break;case 1:color=\"#28a745\";break;case 2:color=\"#dc3545\";break;case 3:color=\"#ffc107\";break;case 4:color=\"#17A2BD\";break;case 5:default:color=\"#fff\";}this.setState({color:color});}},{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;//TODO: make this tick every 100ms\n//TODO: This won't work if the session goes through midnight\nthis.setState({interval:setInterval(function(){return _this2.props.dispatch(updateTime(new Date().getTime()));},100)});this.props.dispatch(startTime(new Date().getTime()));}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState){var currentValue=Math.round((this.props.time.currentTime-this.props.time.start)/1000);var prevValue=Math.round((prevProps.time.currentTime-prevProps.time.start)/1000);if(Math.floor(currentValue/60)!==Math.floor(prevValue/60)){this.changeColor();}}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){clearInterval(this.state.interval);//TODO: Clear redux store data too on unmount\n}},{key:\"render\",value:function render(){var value=Math.round((this.props.time.currentTime-this.props.time.start)/1000);var seconds=value%60;var minutes=Math.floor(value/60);var zero=seconds<10?0:\"\";return/*#__PURE__*/React.createElement(\"time\",{id:\"timer\",className:\"border py-3\"},/*#__PURE__*/React.createElement(\"code\",{style:{color:this.state.color}},minutes,\":\",zero,seconds));}}]);return Stopwatch;}(React.Component);function mapStateToProps(_ref){var notes=_ref.notes,viewControls=_ref.viewControls,time=_ref.time;return{notes:notes,viewControls:viewControls,time:time};}export default connect(mapStateToProps)(Stopwatch);","map":{"version":3,"sources":["/Users/ryanehresman/Documents/JS/create-react-app-next/musicstudy/intervalmemorization/src/stopwatch.js"],"names":["React","connect","startTime","updateTime","Stopwatch","state","interval","color","changeColor","bind","r","Math","floor","random","console","log","setState","setInterval","props","dispatch","Date","getTime","prevProps","prevState","currentValue","round","time","currentTime","start","prevValue","clearInterval","value","seconds","minutes","zero","Component","mapStateToProps","notes","viewControls"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { startTime, updateTime } from \"./actions/index\";\n\nclass Stopwatch extends React.Component {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.state = {\n\t\t\tinterval: null,\n\t\t\tcolor: \"#fff\",\n\t\t};\n\t\tthis.changeColor = this.changeColor.bind(this);\n\t}\n\n\tchangeColor() {\n\t\tlet r = Math.floor(Math.random() * 6);\n\t\tlet color;\n\t\tif (r === this.state.color) {\n\t\t\tr = (r + 1) % 6;\n\t\t}\n\t\tconsole.log(\"r=\", r);\n\t\tswitch (r) {\n\t\t\tcase 0:\n\t\t\t\tcolor = \"#007bff\";\n\t\t\t\tbreak;\n\t\t\tcase 1:\n\t\t\t\tcolor = \"#28a745\";\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tcolor = \"#dc3545\";\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\tcolor = \"#ffc107\";\n\t\t\t\tbreak;\n\t\t\tcase 4:\n\t\t\t\tcolor = \"#17A2BD\";\n\t\t\t\tbreak;\n\t\t\tcase 5:\n\t\t\tdefault:\n\t\t\t\tcolor = \"#fff\";\n\t\t}\n\t\tthis.setState({ color });\n\t}\n\n\tcomponentDidMount() {\n\t\t//TODO: make this tick every 100ms\n\t\t//TODO: This won't work if the session goes through midnight\n\t\tthis.setState({\n\t\t\tinterval: setInterval(\n\t\t\t\t() => this.props.dispatch(updateTime(new Date().getTime())),\n\t\t\t\t100\n\t\t\t),\n\t\t});\n\t\tthis.props.dispatch(startTime(new Date().getTime()));\n\t}\n\n\tcomponentDidUpdate(prevProps, prevState) {\n\t\tconst currentValue = Math.round(\n\t\t\t(this.props.time.currentTime - this.props.time.start) / 1000\n\t\t);\n\t\tconst prevValue = Math.round(\n\t\t\t(prevProps.time.currentTime - prevProps.time.start) / 1000\n\t\t);\n\t\tif (Math.floor(currentValue / 60) !== Math.floor(prevValue / 60)) {\n\t\t\tthis.changeColor();\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\tclearInterval(this.state.interval);\n\t\t//TODO: Clear redux store data too on unmount\n\t}\n\n\trender() {\n\t\tconst value = Math.round(\n\t\t\t(this.props.time.currentTime - this.props.time.start) / 1000\n\t\t);\n\t\tconst seconds = value % 60;\n\t\tconst minutes = Math.floor(value / 60);\n\t\tconst zero = seconds < 10 ? 0 : \"\";\n\t\treturn (\n\t\t\t<time id=\"timer\" className=\"border py-3\">\n\t\t\t\t<code style={{ color: this.state.color }}>\n\t\t\t\t\t{minutes}:{zero}\n\t\t\t\t\t{seconds}\n\t\t\t\t</code>\n\t\t\t</time>\n\t\t);\n\t}\n}\n\nfunction mapStateToProps({ notes, viewControls, time }) {\n\treturn { notes, viewControls, time };\n}\n\nexport default connect(mapStateToProps)(Stopwatch);\n"]},"metadata":{},"sourceType":"module"}